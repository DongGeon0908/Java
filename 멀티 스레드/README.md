### 📒Contents

- 프로세스 `process`
  
    - 운영체제에서 실행 중인 하나의 애플리케이션
    - 사용자가 애플리케이션을 실행하면 운영체제로부터 실행에 필요한 메모리를 할당받아 애플리케이션의 코드를 실행
    
- 멀티 태스킹 `Multi Tasking`

    - 두 가지 이상의 작업을 동시에 처리하는 것
    - 운영체제는 멀티 태스킹을 위해 `CPU` 및 메모리 자원을 프로세스마다 적절히 할당하고 병렬로 처리
    - 멀티 프로세스
        - 애플리케이션 단위의 멀티 태스킹
        - 운영체제에서 할당받은 자신의 메모리를 가지고 실행되기 때문에 서로 독립적
    - 멀티 스레드
        - 애플리케이션 내부에서의 멀티 태스킹
        - 하나의 프로세스 내부에 생성되기 때문에 하나의 스레드가 예외를 발생시키면 프로세스 자체가 종료될 수 있어 다른 스레드에게 영향을 미침

- 멀티 스레드 `Multi Thread`

    - 한 가지 작업을 실행하기 위해 순차적으로 실행할 코드
    - 하나의 스레드는 하나의 코드 실행 흐름이기 때문에 한 프로세스 내에 스레드가 두 개라면 두 개의 코드 실행 흐림이 생김
    - 사용 분야
        - 대용량 데이터의 처리 시간을 줄이기 ㄷ위해 데이터를 분할해서 별렬로 처리
        - `UI`를 가지고 있는 애플리케이션에서 네트워크 통신을 하기 위해 사용
        - 다수 클라이언트의 요청을 처리하는 서버를 개발할 때에도 사용
        - 애플리케이션을 개발하는데 꼭 필요한 기능

- 메인 스레드 `main thread`

    - 모든 자바 애플리케이션은 메인 스레드가 `main()`를 실행하면서 시작
        - `main()`의 첫 코드부터 아래로 순차적으로 실행

- 싱글 스레드

    - 메인 스레드가 종료하면 프로세스도 종료

- 멀티 스레드

    - 실행 중인 스레드가 하나라도 있다면, 프로세스는 종료되지 않음
    - 서로 다른 작업을 동시에 처리

- 작업 스레드 생성과 실행

    - 먼저, 몇 개의 작업을 병렬로 실행할지 결정하고 각 작업별로 스레드를 생성
        - 메인 작업 이외에 추가적인 병렬 작업의 수만큼 스레드를 생성
        - 작업 스레드로 객체로 생성
        - `java.lang.Thread`클래스 이용
        - `Trhead` 상속

    `Thread thread = new Thread(Runnable target);`

    - `Runnable`

      - 작업 스레드가 실행할 수 있는 코드를 가지고 있는 객체

      - 인터페이스 타입

      - `run()`을 재정의해서 작업 스레드가 실행할 코드를 작성

      - 작업 내용을 가지고 있는 객체 -> 실제 스레드 X

        - `Runnable` 구현 객체를 생성 -> `Thread`의 매개값으로 호출 -> 스레드 생성

          ```java
          Runnable task = new Task();
          Thead thread = new Thread(task);
          ```

        -  `Runnable` 익명 객체를 매개값으로 사용

          ```
          Thread thread = new Thread(new Runnable(){
          	public void run(){
          	
          	}
          });
          ```

        - 람다식을 매개값으로 사용

          ```
          Thread thread = new Thread(()->{
          	
          });
          ```

      - 스레드의 실행

        ```
        thread.start();
        ```

- `Thread` 하위 클래스로붙 생성

    - `Runnable`로 생성하지 않고, `Thread`의 하위 클래스로 작업 스레드를 정의하면서 작업 내용을 포함시킴

        - `Thread` 클래스를 상속한 후, `run` 메소드를 재정의해서 스레드가 실행할 코드를 작성

            ```
            public class WorkerThread extends Thread {
            	@Override
            	public void run(){
            	// 실행 코드
            	}
            }
            Thread thread = new WorkerThread();
            ```

        - `Thread` 익명 객체로 작업 스레드 객체를 생성

            ```
            Thread thread = new Thread() {
            	public void run(){
            	// 실행코드
            	}
            };
            ```

        - 작업 스레드 객체에서 `start()`을 통해 메소드를 실행시킴

- 스레드의 이름

    - 스레드 이름을 변경하고 싶을 경우

        ```
        thread.setName("스레드 이름");
        ```

    - 스레드 이름을 알고 싶을 경우

        ```
        thread.getName();
        ```

    - 현재 스레드를 참조

        ```
        Thread thread = Thread.currentThread();
        ```

- 스레드 우선순위

    - 동시성 `Concurrency`

        - 멀티 작업을 위해 하나의 코어에서 멀티 스레드가 번갈아가며 실행하는 성질

    - 병렬성 `Parallelism`

        - 멀티 작업을 위해 멀티 코어에서 개별 스레드를 동시에 실행하는 성질

    - 스레드 스케줄링

        - 스레드의 개수가 코어의 수보다 많을 경우, 스레드를 어떤 순서에 의해 동시성으로 실행할 것인가를 결정

        -  우선순위 `Priority`

            - 우선순위가 높은 스레드가 실행 상태를 더 많이 가지로록 스케줄링하는 것
            - 스레드 객체에 우선순위 번호를 부여할 수 있음 -> 개발자가 코드로 제어 가능

            ```
            thread.setPriority(우선순위);
            ```

            - `Thread` 클래스의 상수 사용

              ```
              thread.setPriority(Thread.MAX_PRIORITY);
              thread.setPriority(Thread.NORM_PRIORITY);
              thread.setPriority(Thread.MIN_PRIORITY);
              ```

        - 순환 할당 `Round-Robin`

            - 시간 할당량을 정해서 하나의 스레드를 정해진 시간만큼 실행하고 다시 다른 스레드를 실행하는 방식
            - 자바 가상 기계에 의해서 정해짐 -> 코드 제어 불가

-  공유 객체를 사용할 때의 주의할 점

  - 잠시 객체에 대한 사용이 없을 때 다른 스레드가 해당 객체의 값을 변경할 수 있음

  - 스레드가 사용 중인 객체를 다른 스레드가 변경할 수 없도록 하는 방법

    - 스레드 작업이 끝날 때까지 객체에 잠금을 걸어서 다른 스레드가 사용할 수 없도록 함

    - 임계 영역 `critical section`

      - 동기화`synchronized` 메소드와 동기화 블록을 통해 임계 영역 설정

        ```
        public synchronized void method(){
        	// 임계영역
        }
        ```

      - 스레드가 동기화 메소드를 실행하는 즉시 객체 잠금 일어남

      - 스레드가 동기화 메소드를 실행 종료하면 잠금 풀림